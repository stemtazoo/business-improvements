# 初心者向け Git 使用手順書

この手順書は、Pythonのコードを安全に管理するために、Gitを使用してバージョン管理を始めるための初心者向けガイドです。社内共有フォルダにリポジトリを作成し、ローカルPCで作業する方法を説明します。

---

## ✅ 1. Gitのインストール

### Windowsの場合

1. Git公式サイトへアクセス: [https://git-scm.com/](https://git-scm.com/)
2. 最新のインストーラーをダウンロードし、インストール
3. インストール中は基本的にデフォルト設定のままでOK

---

## 📁 2. リポジトリの準備（社内共有フォルダ）

### 社内共有フォルダに空のGitリポジトリを作成

```bash
# 共有フォルダのパスに移動（例）
cd "Z:\SharedFolder\project_repo"

# 空のGitリポジトリを作成
git init --bare
```

> **注意**: "--bare" をつけることで、リモート用のリポジトリ（作業ファイルがない）になります。

---

## 📝 補足：.gitignoreファイルの作成（推奨）

作業フォルダに `.gitignore` ファイルを作成しておくと、Gitが追跡しないファイルやフォルダを指定できます。

Python開発では以下のような記述が一般的です（サブフォルダも含めて対応）：

```gitignore
# Pythonのキャッシュファイルを無視（すべての階層）
__pycache__/
*.py[cod]

# Jupyter Notebookのチェックポイント
.ipynb_checkpoints/

# OSごとの隠しファイル
.DS_Store
Thumbs.db
```

この `.gitignore` をプロジェクトのルートに配置しておきましょう。

---

## 💼 3. ローカルPCでの作業用リポジトリの作成

```bash
# 作業ディレクトリを作成して移動
mkdir my_python_project
cd my_python_project

# Gitリポジトリを初期化
git init

# 共有フォルダのリポジトリをリモートとして追加
git remote add origin "Z:\SharedFolder\project_repo"
```

> ❗ この方法は既存の作業ディレクトリを Git 管理したい場合に使います。 既に作成したコードやファイルがある場合に便利ですが、初心者の方にはやや手順が多く感じられるかもしれません。

> 💡 **最初にGitで作業を始める場合は、次の「クローン」方法の方が直感的で簡単です。**

---

## 🌐 4. 他のPCで作業する場合（または最初からクローンする場合）

```bash
cd 作業用フォルダ

git clone "Z:\SharedFolder\project_repo"
```

この方法では、リモートリポジトリの内容を自動で取得し、初期設定も自動で行ってくれます。

> ✅ **迷ったらこちらの方が簡単・確実です！**

---

## ✍️ 5. ファイルの追加とコミット

### ファイルを追加して履歴を記録する

```bash
# ファイルの作成（例）
echo "print('Hello World')" > hello.py

# Gitに追加
git add hello.py

# コメント付きで保存（コミット）
git commit -m "初回のコード追加"
```

---

## 🛠️ 6. リモート（共有フォルダ）へプッシュ

### 動作確認が終わるまでは push せずに commit のみ実施する運用について

複数のPCで同じリポジトリを使用している場合、コードが動作確認できるまでは `git push` をせずに `git commit` だけを行うことで、他の人の作業に影響を与えず、自分の作業履歴を安全に残すことができます。

```bash
# 変更があったファイルを追加
git add .

# 動作確認用のコミット（例）
git commit -m "バグ修正 - 動作確認前"
```

動作確認が終わったら、次のコマンドでリモートに反映しましょう：

```bash
git push origin master
```

> 📝 `git push origin master` でエラーが出る場合は、リポジトリの初期ブランチ名が `main` の場合があります。そのときは `git push origin main` としてみてください。

---

## ⏳ 7. 過去のバージョンに戻す方法

### 変更履歴の確認

```bash
git log
```

上記コマンドでコミット履歴が表示されます。

```
commit 4f5e1b7d2c...（←この文字列がコミットID）
Author: 名前
Date:   2024-04-22

    修正内容のコメント
```

### 特定のバージョンに戻す（作業フォルダのみ）

```bash
git checkout 4f5e1b7d2c hello.py
```

特定ファイルだけ戻す場合。すべてのファイルをその時点に戻すには：

```bash
git checkout 4f5e1b7d2c
```

### 永続的にその状態に戻す（履歴もそのままコミットとして反映）

```bash
git revert 4f5e1b7d2c
```

または、完全に戻したい場合は：

```bash
git reset --hard 4f5e1b7d2c
```

> ※ `reset --hard` は注意して使ってください。作業中の変更が消えます！

---

## 🌱 8. ブランチを使って安全に作業する

リモートリポジトリの `master`（メインの履歴）に直接 push するのはリスクがあります。安全に作業するために、以下のようにブランチを作って作業しましょう。

```bash
# 新しいブランチを作成（例：bugfix）
git checkout -b bugfix

# 作業・コミットを進める
git add .
git commit -m "バグ修正作業中"

# 確認後、共有リポジトリに push
git push origin bugfix
```

> **補足**: `-b` オプションは "branch" の略で、「新しいブランチを作って切り替える」意味です。
> 他のメンバーと作業を分けられるので衝突を避けやすくなります。

---

## 🔍 便利なコマンド：状態を確認する

```bash
git status
```

現在の状態（どのファイルを修正したか、コミットされていないか）を確認できます。

```bash
git diff
```

どこを変更したかの中身を確認できます。

---

## 🧩 よくあるトラブルQ&A

**Q. Windowsで共有フォルダから clone しようとしたらエラーになった！**

- A. パス指定にバックスラッシュ（\）を使うと、環境によってエスケープ文字として誤解されることがあります。
  **スラッシュ（/）を使うと安全です。**
  例：
  ```bash
  git clone Z:/SharedFolder/project_repo
  ```

> 💡 Gitのバージョンや環境によっては、バックスラッシュ（\）でも動作することがありますが、安定性の観点からスラッシュを使うことをおすすめします。

**Q. Windowsで共有フォルダから clone しようとしたらエラーになった！**

- A. パス指定にバックスラッシュ（\）を使うと、環境によってエスケープ文字として誤解されることがあります。
  **スラッシュ（/）を使うと安全です。**
  例：
  ```bash
  git clone Z:/SharedFolder/project_repo
  ```

**Q. pushしようとすると「non-fast-forward」って出てできない！**

- A. 他の人がすでに push している可能性があります。
  ```bash
  git pull --rebase
  git push
  ```

**Q. 間違えてファイルをコミットしてしまった！**

- A. まだ push していなければ、以下で取り消せます。
  ```bash
  git reset HEAD~1
  ```

> 💡 `HEAD~1` は直前の「コミット」を指します。「直前の push」ではありません。

**Q. 変更を取り消したい！**

- A. まだコミットしていない場合は、以下で元に戻せます。
  ```bash
  git checkout -- ファイル名
  ```

---

## ⚠️ よくあるミス防止

- **作業前に** `git pull` **を実行**して、最新の状態にしてから作業開始！
- **こまめに** `git commit` **して保存**するクセをつけよう！
- 大きな変更をする前には `git branch` で別の作業ブランチを作るのもおすすめ

---

## ☑️ まとめ

- Gitはファイルの履歴を自動で管理してくれる便利なツールです。
- 社内共有フォルダをリモートとして設定すれば、チーム内での共同作業も安心。
- 最初は `add` → `commit` → `push` の3ステップを覚えるだけでもOK！

---

## 📚 参考リンク

- [Git公式ドキュメント](https://git-scm.com/doc)
- [Pro Git 日本語版](https://git-scm.com/book/ja/v2)

---

一緒にGitを使って、ファイルの安全管理＆効率アップを目指しましょう！

